@model List<Kitap>


<div class="table-responsive">
    <table class="table table-primary table-striped col-6">
        <thead>
            <tr>
                <th scope="col">Kitap Adi</th>
                <th scope="col">Ozet</th>
                <th scope="col">İşlemler</th>

            </tr>
        </thead>
        <tbody id="tableBody">
        </tbody>
    </table>
</div>


@section Scripts{
    <script type="text/javascript">

        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "Kitap/GetAll",
                success: function (res) {

                    for (let i of res) {
                        var satir = `
                                <tr>
                                    <td id="txtAd${i.id}">${i.ad}</td>
                                    <td id="txtOzet${i.id}">${i.ozet}</td>
                                    <td> <a class="btn btn-primary editButtons" onClick="duzenle('${i.id}')"> Düzenle </a> </td>
                                </tr>`;
                        $("#tableBody").append(satir);
                    }
                }
            });
        });
        function duzenle(KitapId) {
            console.log("duzenle tiklandi");
           var veri = {
                    kitapId: KitapId
                };

            $.ajax({              
                type: "POST",
                url: "Kitap/FindById",
                data:veri,
                success: function (res) {
                    $("#txtAd"+res.id).prop('contentEditable', true);
                    $("#txtOzet"+res.id).prop('contentEditable', true);
                    $(".editButtons").unbind();
                }
            });
        }
    </script>
}